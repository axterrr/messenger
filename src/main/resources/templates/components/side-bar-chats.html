<link rel="stylesheet" href="/css/components/side-bar-chats.css">
<script src="/js/components/side-bar-chats.js"></script>

<div class="side-bar d-flex flex-column">
  <div class="side-bar-header d-flex justify-content-between align-items-center">
    <h4 class="mb-0">Your chats</h4>
    <button class="me-3 btn btn-outline-primary btn-sm">Create new</button>
  </div>

  <div class="side-bar-content" id="chat-list">
    <div th:each="chat : ${currentUser.chats}" th:id="${chat.id}" class="chats-item">
      <a th:classappend="${activeChat?.id == chat.id} ? 'active'"
         th:href="@{/(chat=${chat.id})}" class="chat-link flex-column justify-content-around">
        <span th:text="${chat.name}" class="chat-name fw-bold"></span>
        <small class="chat-preview text-muted" th:text="${
                 chat.lastMessage == null ? 'No messages yet' :
                 ((chat.lastMessage.sender == null ? 'Unknown: ' :
                 (chat.lastMessage.sender.username == currentUser.username ? 'You: ' :
                 chat.lastMessage.sender.name + ': ')) + chat.lastMessage.content)}">
        </small>
      </a>
    </div>
  </div>

  <div class="side-bar-footer">
    <a href="/" class="active">chats</a>
    <a href="/settings/profile">settings</a>
  </div>
</div>
